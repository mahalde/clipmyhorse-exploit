# ClipMyHorse - Exploit

This repository showcases an explot in the [ClipMyHorse Website](https://clipmyhorse.tv). It is currently possible to view videos, which are
normally protected behind a paywall, without a subscription.

## Installing

Install the required packages with Yarn:

```
yarn
```

Then start the project using:

```
yarn start
```

This opens the project on localhost on port 3000.

## Working demo

A working demonstration of the exploit (this repository) can be found
at [my personal website](http://clipmyhorse-exploit.malte-thienel.de).

## How does it work?

The playlist file (an M3U8 file, for example [this](https://archive01.clipmyhorse.tv/vod/archive/amlst:mp4,2018/Oldenburg_2068/Thursday/Prfg_24_Siegerehrung_100592/playlist.m3u8?cmhtokenendtime=1610990606&cmhtokenhash=rDBbV9_LqupkzaOyDoRHboANMEqdo4VVyfrk2obRu_c=&cmhtokenstarttime=1610900606)) containing all the necessary video segments
is available to everyone accessing the site. This is because the file
is not CORS-protected. The file then gets loaded into a video player (here [video-js](https://github.com/videojs/http-streaming)) and played. It
automatically fetches the required segments, which are also not protected,
and shows them.

Additionally you can paste in a event URL. The backend then uses [puppeteer](https://pptr.dev) to access the website and look for all parts
of an event. This can be done by looking into the `playerdata` for the
event (for example [this](https://www.clipmyhorse.tv/de_DE/archive/playerdata/2068/41641)). This JSON includes the playlist URLs for all the parts
of the event. You can then switch to a specific part by clicking the buttons
on the website.
